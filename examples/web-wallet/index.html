<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Navio Web Wallet</title>
  <link rel="stylesheet" href="/src/styles.css" />
</head>
<body>
  <div id="app">
    <h1>Navio Web Wallet</h1>

    <div id="status">Loading SDK...</div>

    <!-- Wallet list -->
    <section id="wallet-list" class="hidden">
      <div class="card">
        <h2>Your Wallets</h2>
        <div id="wallets-container"></div>
        <button id="btn-new-wallet" class="secondary" style="margin-top:0.75rem;width:100%">+ Create New Wallet</button>
      </div>
    </section>

    <!-- Create / Connect -->
    <section id="setup" class="hidden">
      <div class="card">
        <h2 id="setup-title">Create New Wallet</h2>

        <div id="field-wallet-name" class="field">
          <label for="wallet-name">Wallet Name</label>
          <input id="wallet-name" value="" placeholder="My Wallet" />
        </div>

        <div class="field">
          <label for="electrum-host">Electrum Server</label>
          <div class="row">
            <input id="electrum-host" value="testnet.nav.io" placeholder="host" />
            <input id="electrum-port" type="number" value="50005" placeholder="port" style="width:80px" />
          </div>
        </div>

        <div id="field-password" class="field">
          <label for="wallet-password">Password <span class="hint">(optional — encrypts spending keys)</span></label>
          <input id="wallet-password" type="password" placeholder="Leave empty for no encryption" />
        </div>

        <div id="field-unlock" class="field hidden">
          <label for="unlock-password">Password <span class="hint">(required — wallet is encrypted)</span></label>
          <input id="unlock-password" type="password" placeholder="Enter wallet password" />
        </div>

        <div id="field-mnemonic" class="field">
          <label for="mnemonic">Mnemonic <span class="hint">(leave empty to create new wallet)</span></label>
          <textarea id="mnemonic" rows="2" placeholder="word1 word2 word3 ..."></textarea>
        </div>

        <div id="field-restore-height" class="field">
          <label for="restore-height">Restore from height</label>
          <input id="restore-height" type="number" value="0" min="0" placeholder="0" style="width:120px" />
        </div>

        <div class="row">
          <button id="btn-create">Create Wallet</button>
          <button id="btn-back" class="secondary hidden">Back</button>
        </div>
      </div>
    </section>

    <!-- Wallet info -->
    <section id="wallet" class="hidden">
      <div class="card">
        <h2 id="wallet-title">Wallet</h2>
        <dl>
          <dt>Mnemonic</dt>
          <dd>
            <span id="wallet-mnemonic" class="mono">****</span>
            <button id="btn-toggle-mnemonic" class="inline-btn">Show</button>
          </dd>
          <dt>Address</dt>
          <dd id="wallet-address" class="mono">-</dd>
          <dt>Balance</dt>
          <dd id="wallet-balance">-</dd>
          <dt>Sync Height</dt>
          <dd id="wallet-height">-</dd>
          <dt>Encryption</dt>
          <dd id="wallet-encryption">None</dd>
        </dl>
        <div class="row">
          <button id="btn-sync">Start Sync</button>
          <button id="btn-stop" disabled>Stop Sync</button>
          <button id="btn-lock" class="secondary hidden">Lock</button>
          <button id="btn-disconnect" class="secondary">Disconnect</button>
          <button id="btn-delete" class="danger">Delete</button>
        </div>
      </div>
      <div class="card">
        <h2 style="display:flex;justify-content:space-between;align-items:center">
          UTXOs
          <span style="display:flex;gap:0.4rem;align-items:center">
            <label class="toggle-label"><input type="checkbox" id="utxo-show-spent" /> Show spent</label>
            <button id="btn-refresh-utxos" class="inline-btn">Refresh</button>
          </span>
        </h2>
        <div id="utxo-container" class="utxo-container">
          <div class="empty-state">Click Refresh to load UTXOs</div>
        </div>
      </div>

      <div class="card">
        <h2 style="display:flex;justify-content:space-between;align-items:center">
          Transaction History
          <button id="btn-refresh-history" class="inline-btn">Refresh</button>
        </h2>
        <div id="history-container" class="history-container">
          <div class="empty-state">Click Refresh to load history</div>
        </div>
      </div>

      <div class="card">
        <h2>Send</h2>
        <div class="field">
          <label for="send-address">Destination Address</label>
          <input id="send-address" placeholder="tnv1..." />
        </div>
        <div class="field">
          <label for="send-amount">Amount (NAV)</label>
          <input id="send-amount" type="number" step="0.00000001" min="0" placeholder="0.00000000" />
        </div>
        <div class="field">
          <label for="send-memo">Memo <span class="hint">(optional)</span></label>
          <input id="send-memo" placeholder="" />
        </div>
        <div class="row" style="align-items:center;">
          <button id="btn-send">Send</button>
          <span id="send-status" class="send-status"></span>
        </div>
      </div>

      <div class="card">
        <h2>Log</h2>
        <pre id="log"></pre>
      </div>
    </section>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
